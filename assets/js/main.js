const translations = {
    fr: {
        nav_home: "Accueil",
        nav_shop: "Boutique",
        nav_about: "À propos",
        nav_contact: "Contact",
        nav_account: "Mon compte",
        nav_cart: "Panier",
        theme_toggle_light: "Mode clair",
        theme_toggle_dark: "Mode sombre",
        cta_shop: "Boutique",
        hero_tag: "Nouvelle vague streetwear",
        hero_title: "Vision — L'élégance urbaine taillée pour le quotidien",
        hero_copy: "Des silhouettes minimalistes, des matières responsables et une allure qui capte l'instant. Découvrez des pièces pensées pour bouger avec vous.",
        hero_cta_primary: "Explorer la collection",
        hero_cta_secondary: "Voir les éditions limitées",
        hero_card_title: "Drop Vision 07",
        hero_card_copy: "Parka technique, hoodie double épaisseur, pantalon cargo texturé.",
        hero_card_link: "Découvrir la capsule",
        badge_new: "Nouveautés",
        highlight_tag: "Sélection lumineuse",
        highlight_title: "Une zone claire pour repérer vos prochains essentiels",
        highlight_copy: "Visualisez dès maintenant trois emplacements produits dédiés à vos futurs best-sellers Vision.",
        highlight_visual: "Visuel 4:5",
        highlight_product1_label: "Produit à venir",
        highlight_product1_name: "Emplacement produit n°1",
        highlight_product1_copy: "Réservez cet espace pour votre pièce phare : photo, nom, prix et appel à l'action s'y intégreront parfaitement.",
        highlight_product2_label: "Produit à venir",
        highlight_product2_name: "Emplacement produit n°2",
        highlight_product2_copy: "Mettez en avant une nouveauté ou une édition limitée avec visuel 3:4 et fiche descriptive concise.",
        highlight_product3_label: "Produit à venir",
        highlight_product3_name: "Emplacement produit n°3",
        highlight_product3_copy: "Préparez ici votre drop exclusif : matériaux, storytelling et boutons d'ajout au panier seront mis en valeur.",
        highlight_price_placeholder: "Prix à définir",
        highlight_cta: "Bientôt disponible",
        collections_tag: "Collections",
        collections_title: "Des pièces essentielles pour un dressing visionnaire",
        collections_copy: "Composez votre uniforme urbain avec des basiques revisités, des coupes oversize maîtrisées et des détails techniques pensés pour durer.",
        collection_metro_title: "Ligne Métropolis",
        collection_metro_copy: "Blousons modulaires, pantalons cargos ajustables et accessoires réfléchissants inspirés de la ville nocturne.",
        collection_metro_link: "Shopper la ligne",
        collection_essentials_title: "Essentials 24/7",
        collection_essentials_copy: "Hoodies premium, tees respirants et joggers sculptés pour l'agilité. Le confort sans compromis.",
        collection_essentials_link: "Shopper les essentiels",
        collection_fluid_title: "Fluid Dynamics",
        collection_fluid_copy: "Pièces unisexes, tissus techniques semi-transparents et superpositions légères inspirées du mouvement.",
        collection_fluid_link: "Shopper la capsule",
        values_tag: "Manifeste",
        values_title: "Un vestiaire engagé pour une communauté en mouvement",
        values_1: "Production responsable en ateliers certifiés en Europe et au Japon.",
        values_2: "Matériaux recyclés, coton bio, cuir vegan et emballages compostables.",
        values_3: "Création inclusive : coupes pensées pour toutes les morphologies.",
        values_cta: "Lire notre histoire",
        metric_satisfaction: "de clients satisfaits",
        metric_shipping: "Expédition moyenne",
        metric_cities: "Pays livrés",
        limited_tag: "Éditions limitées",
        limited_title: "Drops exclusifs & collaborations visionnaires",
        limited_copy: "Alertes en temps réel, quantités restreintes, design signature. Ne manquez aucun drop.",
        badge_collab: "Collaboration",
        badge_limited: "Série limitée",
        badge_restocks: "Restock",
        limited_card1_title: "Vision x Concrete Waves",
        limited_card1_copy: "Capsule inspirée des textures urbaines et des graffitis lumineux.",
        limited_card1_link: "Accéder au drop",
        limited_card2_title: "Programme Atelier 06",
        limited_card2_copy: "Pièces numérotées, broderies à la main, packaging signature Vision.",
        limited_card2_link: "Réserver",
        limited_card3_title: "Archive Restock",
        limited_card3_copy: "Les pièces iconiques reviennent en quantités très limitées.",
        limited_card3_link: "Être notifié·e",
        immersive_tag: "Vue 360°",
        immersive_title: "Interagissez avec nos pièces en 3D",
        immersive_copy: "Manipulez chaque vêtement, inspectez les textures et choisissez la combinaison qui vous ressemble. La technologie Vision 360° rend l'expérience d'achat tactile.",
        immersive_point1: "Visualisation multi-angle et zoom haute définition.",
        immersive_point2: "Prévisualisation des variations de couleurs en temps réel.",
        immersive_point3: "Compatibilité mobile, tablette et desktop.",
        immersive_note: "Aperçu prototype — la modélisation finale sera intégrée lors de la réception des fichiers 3D.",
        services_tag: "Services",
        services_title: "Une expérience e-commerce fluide et sécurisée",
        service_payment_title: "Paiement sécurisé",
        service_payment_copy: "Carte bancaire, PayPal et wallets numériques avec chiffrement AES-256.",
        service_delivery_title: "Livraison mondiale",
        service_delivery_copy: "Suivi en temps réel, partenaires DHL Express & Chronopost, options green.",
        service_returns_title: "Retours simplifiés",
        service_returns_copy: "Portail de retours intégré, étiquettes prépayées, remboursement rapide.",
        service_support_title: "Support humain",
        service_support_copy: "Équipe dédiée multilingue, réponses sous 24h et assistance live chat.",
        newsletter_tag: "Newsletter",
        newsletter_title: "Recevez les drops avant tout le monde",
        newsletter_copy: "Inscrivez-vous pour accéder aux préventes, codes promo exclusifs et invitations à nos évènements.",
        newsletter_label: "Votre email",
        newsletter_cta: "S'inscrire",
        footer_copy: "Vision réinvente les essentiels urbains avec un regard responsable et avant-gardiste.",
        footer_shop: "Boutique",
        footer_support: "Support",
        footer_legal: "Légal",
        footer_metro: "Ligne Métropolis",
        footer_essentials: "Essentials 24/7",
        footer_fluid: "Fluid Dynamics",
        footer_limited: "Drops exclusifs",
        footer_contact: "Nous contacter",
        footer_returns: "Politique de retour",
        footer_delivery: "Livraison & suivi",
        footer_privacy: "Confidentialité & cookies",
        footer_terms: "Mentions légales",
        footer_cgv: "Conditions générales de vente",
        footer_cookies: "Préférences cookies",
        footer_rights: "© Vision. Tous droits réservés.",
        footer_budget: "Budget : des toasts de chèvre ?",
        cookies_message: "Vision utilise des cookies pour personnaliser votre expérience. Choisissez vos préférences.",
        cookies_settings: "Paramétrer",
        cookies_accept: "Tout accepter",
        shop_cta_cart: "Voir le panier",
        shop_tag: "Boutique",
        shop_title: "Composez votre uniforme urbain",
        shop_copy: "Filtrez par catégorie, taille, couleur ou disponibilité pour trouver la pièce Vision qui vous correspond.",
        filter_category: "Catégorie",
        filter_size: "Taille",
        filter_color: "Couleur",
        filter_availability: "Disponibilité",
        filter_all: "Toutes",
        filter_all_sizes: "Toutes",
        filter_all_colors: "Toutes",
        filter_metropolis: "Métropolis",
        filter_essentials: "Essentials",
        filter_fluid: "Fluid Dynamics",
        filter_limited: "Éditions limitées",
        filter_black: "Noir",
        filter_white: "Blanc",
        filter_grey: "Gris",
        filter_accent: "Accent chromé",
        filter_instock: "En stock",
        filter_preorder: "Précommande",
        filter_restock: "Restock",
        filter_apply: "Appliquer",
        filter_reset: "Réinitialiser",
        promo_title: "Utilisez le code VISION15",
        promo_copy: "15% de réduction sur votre première commande. Offre limitée aux 500 premiers clients.",
        cta_banner_title: "Besoin d'un conseil style ?",
        cta_banner_copy: "Réservez une session en visio avec nos stylistes Vision pour créer votre tenue idéale.",
        cta_banner_link: "Planifier une session",
        about_tag: "Notre univers",
        about_title: "Vision : l'esthétique streetwear pensée pour durer",
        about_intro: "Née dans les rues de Paris et façonnée par une communauté internationale, Vision repense les essentiels urbains avec exigence et conscience.",
        timeline_2016_title: "2016 — Origines",
        timeline_2016_copy: "Lancement de Vision avec une première série de hoodies produits en édition limitée et sérigraphiés à la main.",
        timeline_2018_title: "2018 — Communauté",
        timeline_2018_copy: "Ouverture du studio Vision à Paris, ateliers co-créatifs avec les clients et premières collaborations avec des artistes visuels.",
        timeline_2021_title: "2021 — Expansion",
        timeline_2021_copy: "Distribution internationale, lancement de la plateforme e-commerce et introduction des gammes techniques.",
        timeline_2024_title: "2024 — Innovation",
        timeline_2024_copy: "Intégration de la modélisation 3D, logistique bas carbone et programme de recyclage Vision Loop.",
        mission_tag: "Mission",
        mission_title: "Créer des pièces qui racontent les villes et respectent la planète",
        mission_copy: "Chaque collection est conçue à partir de matériaux premium et responsables. Nous travaillons avec des ateliers certifiés, privilégions des séries limitées pour éviter la surproduction et offrons une traçabilité complète.",
        vision_tag: "Vision",
        vision_title: "Une marque pensée pour la communauté",
        vision_copy: "Vision défend la diversité, l'inclusivité et l'expression personnelle. Nos campagnes donnent la parole aux clients, artistes, athlètes et créatifs qui nous inspirent.",
        pillars_title: "Nos piliers",
        pillar_design_title: "Design fonctionnel",
        pillar_design_copy: "Coupes étudiées, poches intelligentes, tissus respirants et résistance à l'eau pour accompagner les rythmes urbains.",
        pillar_culture_title: "Culture street",
        pillar_culture_copy: "Influencée par le skate, la musique électronique et l'art contemporain, Vision capte l'énergie des grandes villes.",
        pillar_responsibility_title: "Responsabilité",
        pillar_responsibility_copy: "Traçabilité complète, partenaires engagés, packaging recyclé et donation d'invendus à des associations.",
        team_title: "L'équipe Vision",
        team_copy: "Une équipe multidisciplinaire mêlant designers, stylistes, développeurs, logisticiens et storytellers.",
        team_aliyah: "Directrice créative — imagine les silhouettes et collabore avec des artistes émergents.",
        team_liam: "Head of Digital — pilote l'expérience e-commerce, la 3D et les innovations retail.",
        team_jade: "Responsable production — garantit la qualité, la traçabilité et la logistique bas carbone.",
        contact_tag: "Contact",
        contact_title: "Parlons de votre expérience Vision",
        contact_intro: "Support client, collaborations, presse ou wholesale — notre équipe est disponible en français et en anglais.",
        contact_name: "Nom complet",
        contact_email: "Email",
        contact_topic: "Sujet",
        contact_message: "Message",
        topic_support: "Support commande",
        topic_collab: "Collaboration",
        topic_press: "Presse",
        topic_wholesale: "Wholesale",
        contact_submit: "Envoyer",
        contact_support_title: "Support client",
        contact_support_copy: "Disponible du lundi au samedi, 9h-20h CET.",
        contact_press_title: "Presse & collaborations",
        contact_press_copy: "Envoyez vos dossiers de presse, portfolios et propositions de projets.",
        contact_store_title: "Showroom Vision",
        contact_store_copy: "Visite sur rendez-vous, essayage privé et personnalisation.",
        contact_cta_title: "Rejoignez la communauté Vision Loop",
        contact_cta_copy: "Recyclage de vêtements, offres exclusives et invitations à nos évènements immersifs.",
        contact_cta_button: "S'inscrire",
        account_tag: "Mon espace",
        account_title: "Gérez votre profil Vision",
        account_intro: "Suivez vos commandes, gérez vos adresses, vos préférences de livraison et vos listes d'envies.",
        account_login_title: "Connexion",
        account_register_title: "Créer un compte",
        account_tracking_title: "Suivi de commande",
        account_email: "Email",
        account_password: "Mot de passe",
        account_login_button: "Se connecter",
        account_forgot: "Mot de passe oublié ?",
        account_name: "Nom complet",
        account_preferences: "Préférences",
        pref_street: "Streetwear structuré",
        pref_casual: "Casual minimal",
        pref_limited: "Drops exclusifs",
        account_register_button: "Créer mon compte",
        account_newsletter: "Je souhaite recevoir la newsletter Vision.",
        account_tracking_number: "Numéro de commande",
        account_tracking_button: "Suivre",
        account_tracking_copy: "Recevez des notifications en temps réel, ajustez vos créneaux de livraison et programmez un retour.",
        account_cta_title: "Activez Vision+",
        account_cta_copy: "Accès prioritaire aux drops, personnalisation des pièces et retours gratuits.",
        account_cta_button: "Découvrir Vision+",
        cart_tag: "Panier",
        cart_title: "Vos sélections Vision",
        cart_intro: "Ajustez les quantités, appliquez vos codes promo et choisissez votre mode de livraison.",
        cart_summary_title: "Récapitulatif",
        cart_subtotal: "Sous-total",
        cart_shipping: "Livraison estimée",
        cart_total: "Total",
        cart_promo: "Code promo",
        cart_apply: "Appliquer",
        cart_checkout: "Passer au paiement sécurisé",
        cart_secure_note: "Transactions sécurisées (CB, PayPal, Apple Pay). Garantie satisfait ou remboursé 30 jours.",
        cart_delivery_title: "Livraison agile",
        cart_delivery_copy: "Choisissez entre express, standard ou point relais. Suivi en temps réel sur votre espace Vision.",
        cart_returns_title: "Retours simplifiés",
        cart_returns_copy: "Préparez votre retour en ligne, choisissez la collecte à domicile ou déposez dans un point relais.",
        cart_support_title: "Support 24/7",
        cart_support_copy: "Live chat, WhatsApp, email. Réponse sous 15 minutes pour les commandes en cours.",
        legal_tag: "Légal",
        legal_title: "Mentions légales & Conditions générales de vente",
        legal_intro: "Informations officielles de la marque Vision, détaillant notre statut juridique, les conditions de vente et les garanties associées.",
        legal_terms_title: "Mentions légales",
        legal_terms_intro: "Ce contenu est fourni à titre de maquette. Les informations officielles seront intégrées lorsque les documents juridiques seront finalisés.",
        legal_terms_company: "Vision Wear SAS — Capital social à définir — RCS Paris.",
        legal_terms_address: "Siège social : 18 rue Horizon, 75010 Paris, France.",
        legal_terms_contact: "Contact : legal@visionwear.com — +33 (0)1 00 00 00 00.",
        legal_terms_director: "Directeur de publication : Aliyah Chen.",
        legal_terms_host: "Hébergeur : à confirmer.",
        legal_cgv_title: "Conditions générales de vente",
        legal_cgv_intro: "Ces CGV seront remplacées par le document officiel communiqué par l'équipe juridique.",
        legal_cgv_1: "Objet : définir les modalités de vente en ligne des produits Vision.",
        legal_cgv_2: "Produits : vêtements et accessoires streetwear, quantités limitées, disponibilité temps réel.",
        legal_cgv_3: "Prix : affichés en EUR avec TVA incluse. Conversion automatique selon la devise du pays de livraison.",
        legal_cgv_4: "Commande : validation après email de confirmation. Possibilité de suivi via l'espace client.",
        legal_cgv_5: "Paiement : cartes bancaires, PayPal, wallets numériques. Sécurisation via protocole 3D Secure.",
        legal_cgv_6: "Livraison : internationale, délais indicatifs communiqués avant paiement, suivi en temps réel.",
        legal_cgv_7: "Retours : 30 jours, produits non portés. Remboursement sous 7 jours après validation.",
        legal_cgv_8: "Garanties : conformité légale, défauts de fabrication, service après-vente dédié.",
        legal_cgv_9: "Service client : support multilingue, contact@visionwear.com.",
        legal_cgv_10: "Droit applicable : droit français. Litiges soumis aux tribunaux compétents de Paris.",
        policies_tag: "Politiques",
        policies_title: "Confidentialité, retours, livraison & cookies",
        policies_intro: "Retrouvez l'ensemble des informations clés concernant la gestion de vos données, les retours, la livraison et vos préférences de cookies.",
        privacy_title: "Politique de confidentialité",
        privacy_intro: "Vision s'engage à protéger vos données personnelles. Le document complet sera publié dès validation juridique.",
        privacy_data: "Collecte limitée aux données nécessaires : identifiants, préférences, historique de commandes.",
        privacy_use: "Utilisation : gestion des commandes, personnalisation, newsletter Vision Loop.",
        privacy_rights: "Vos droits : accès, rectification, portabilité, suppression via privacy@visionwear.com.",
        privacy_security: "Sécurité : chiffrement, audits réguliers, hébergement conforme RGPD.",
        returns_title: "Politique de retour",
        returns_intro: "Les modalités officielles seront intégrées lors de la mise en ligne. Aperçu des engagements Vision :",
        returns_period: "Retour sous 30 jours, pièces non portées et étiquettes intactes.",
        returns_process: "Portail Vision Loop pour générer une étiquette prépayée et suivre votre dossier.",
        returns_refund: "Remboursement sous 7 jours ouvrés après réception et contrôle qualité.",
        returns_exchange: "Échanges possibles selon disponibilité en stock.",
        delivery_title: "Politique de livraison",
        delivery_intro: "Vision expédie à l'international en collaborant avec des partenaires logistiques responsables.",
        delivery_modes: "Modes : express 24/48h, standard 3-5 jours, relais 4-6 jours.",
        delivery_tracking: "Suivi temps réel via l'espace client et notifications SMS.",
        delivery_fees: "Frais calculés selon le pays, offerts dès 200 € d'achat.",
        delivery_green: "Option green : compensation carbone, emballages recyclés.",
        cookies_title: "Politique cookies & préférences",
        cookies_intro: "Vision respecte le RGPD. Cette section sera connectée à une CMP (Consent Management Platform) lors du développement final.",
        cookies_necessary: "Cookies essentiels : indispensables au fonctionnement (authentification, panier).",
        cookies_analytics: "Cookies analytiques : mesure d'audience anonymisée.",
        cookies_marketing: "Cookies marketing : personnalisation des offres et campagnes.",
        cookies_preferences: "Vous pouvez ajuster vos préférences à tout moment depuis le bandeau cookies ou votre compte."
    },
    en: {}
};

translations.en = Object.fromEntries(
    Object.entries(translations.fr).map(([key, value]) => {
        const dictionary = {
            Accueil: "Home",
            "Boutique": "Shop",
            "À propos": "About",
            Contact: "Contact",
            "Mon compte": "Account",
            Panier: "Cart",
            "Mode clair": "Light mode",
            "Mode sombre": "Dark mode",
            "Politiques": "Policies",
            "Nouvelle vague streetwear": "New streetwear wave",
            "Vision — L'élégance urbaine taillée pour le quotidien": "Vision — Urban elegance tailored for everyday life",
            "Des silhouettes minimalistes, des matières responsables et une allure qui capte l'instant. Découvrez des pièces pensées pour bouger avec vous.": "Minimal silhouettes, responsible fabrics and an attitude that catches the moment. Discover pieces designed to move with you.",
            "Explorer la collection": "Explore the collection",
            "Voir les éditions limitées": "See limited editions",
            "Drop Vision 07": "Vision Drop 07",
            "Parka technique, hoodie double épaisseur, pantalon cargo texturé.": "Technical parka, double-layer hoodie, textured cargo pant.",
            "Découvrir la capsule": "Discover the capsule",
            "Nouveautés": "New",
            "Sélection lumineuse": "Luminous selection",
            "Une zone claire pour repérer vos prochains essentiels": "A bright zone to spot your next essentials",
            "Visualisez dès maintenant trois emplacements produits dédiés à vos futurs best-sellers Vision.": "Preview three product placeholders ready for your future Vision best-sellers.",
            "Visuel 4:5": "4:5 visual",
            "Produit à venir": "Coming soon",
            "Emplacement produit n°1": "Product placeholder #1",
            "Réservez cet espace pour votre pièce phare : photo, nom, prix et appel à l'action s'y intégreront parfaitement.": "Reserve this space for your hero piece: imagery, name, price and CTA will slot in seamlessly.",
            "Emplacement produit n°2": "Product placeholder #2",
            "Mettez en avant une nouveauté ou une édition limitée avec visuel 3:4 et fiche descriptive concise.": "Spotlight a new arrival or limited drop with a 3:4 visual and concise write-up.",
            "Emplacement produit n°3": "Product placeholder #3",
            "Préparez ici votre drop exclusif : matériaux, storytelling et boutons d'ajout au panier seront mis en valeur.": "Stage your exclusive drop here: materials, storytelling and add-to-cart actions shine.",
            "Prix à définir": "Price TBD",
            "Bientôt disponible": "Coming soon",
            "Collections": "Collections",
            "Des pièces essentielles pour un dressing visionnaire": "Essential pieces for a visionary wardrobe",
            "Composez votre uniforme urbain avec des basiques revisités, des coupes oversize maîtrisées et des détails techniques pensés pour durer.": "Build your urban uniform with reworked staples, controlled oversized fits and durable technical details.",
            "Ligne Métropolis": "Metropolis Line",
            "Blousons modulaires, pantalons cargos ajustables et accessoires réfléchissants inspirés de la ville nocturne.": "Modular jackets, adjustable cargo pants and reflective accessories inspired by the night city.",
            "Shopper la ligne": "Shop the line",
            "Essentials 24/7": "Essentials 24/7",
            "Hoodies premium, tees respirants et joggers sculptés pour l'agilité. Le confort sans compromis.": "Premium hoodies, breathable tees and sculpted joggers for agility. Comfort without compromise.",
            "Shopper les essentiels": "Shop essentials",
            "Fluid Dynamics": "Fluid Dynamics",
            "Pièces unisexes, tissus techniques semi-transparents et superpositions légères inspirées du mouvement.": "Genderless pieces, semi-transparent technical fabrics and light layering inspired by movement.",
            "Shopper la capsule": "Shop the capsule",
            "Manifeste": "Manifesto",
            "Un vestiaire engagé pour une communauté en mouvement": "A committed wardrobe for a community in motion",
            "Production responsable en ateliers certifiés en Europe et au Japon.": "Responsible production in certified workshops across Europe and Japan.",
            "Matériaux recyclés, coton bio, cuir vegan et emballages compostables.": "Recycled materials, organic cotton, vegan leather and compostable packaging.",
            "Création inclusive : coupes pensées pour toutes les morphologies.": "Inclusive design: fits tailored to every body.",
            "Lire notre histoire": "Read our story",
            "de clients satisfaits": "customer satisfaction",
            "Expédition moyenne": "Average shipping",
            "Pays livrés": "Countries delivered",
            "Éditions limitées": "Limited editions",
            "Drops exclusifs & collaborations visionnaires": "Exclusive drops & visionary collaborations",
            "Alertes en temps réel, quantités restreintes, design signature. Ne manquez aucun drop.": "Real-time alerts, limited quantities, signature design. Don't miss a drop.",
            "Collaboration": "Collab",
            "Série limitée": "Limited",
            Restock: "Restock",
            "Vision x Concrete Waves": "Vision x Concrete Waves",
            "Capsule inspirée des textures urbaines et des graffitis lumineux.": "Capsule inspired by urban textures and luminous graffiti.",
            "Accéder au drop": "Access the drop",
            "Programme Atelier 06": "Atelier Program 06",
            "Pièces numérotées, broderies à la main, packaging signature Vision.": "Numbered pieces, hand embroidery, Vision signature packaging.",
            "Réserver": "Reserve",
            "Archive Restock": "Archive Restock",
            "Les pièces iconiques reviennent en quantités très limitées.": "Iconic pieces return in very limited quantities.",
            "Être notifié·e": "Get notified",
            "Vue 360°": "360° view",
            "Interagissez avec nos pièces en 3D": "Interact with our pieces in 3D",
            "Manipulez chaque vêtement, inspectez les textures et choisissez la combinaison qui vous ressemble. La technologie Vision 360° rend l'expérience d'achat tactile.": "Handle each garment, inspect textures and choose the combo that fits you. Vision 360° technology makes shopping tactile.",
            "Visualisation multi-angle et zoom haute définition.": "Multi-angle viewing and high-definition zoom.",
            "Prévisualisation des variations de couleurs en temps réel.": "Preview color variations in real time.",
            "Compatibilité mobile, tablette et desktop.": "Compatible with mobile, tablet and desktop.",
            "Aperçu prototype — la modélisation finale sera intégrée lors de la réception des fichiers 3D.": "Prototype preview — final modeling will be integrated once 3D files are delivered.",
            "Services": "Services",
            "Une expérience e-commerce fluide et sécurisée": "A seamless, secure e-commerce experience",
            "Paiement sécurisé": "Secure payment",
            "Carte bancaire, PayPal et wallets numériques avec chiffrement AES-256.": "Cards, PayPal and digital wallets with AES-256 encryption.",
            "Livraison mondiale": "Worldwide shipping",
            "Suivi en temps réel, partenaires DHL Express & Chronopost, options green.": "Real-time tracking, DHL Express & Chronopost partners, green options.",
            "Retours simplifiés": "Simple returns",
            "Portail de retours intégré, étiquettes prépayées, remboursement rapide.": "Integrated returns portal, prepaid labels, fast refunds.",
            "Support humain": "Human support",
            "Support": "Support",
            "Équipe dédiée multilingue, réponses sous 24h et assistance live chat.": "Dedicated multilingual team, replies within 24h and live chat assistance.",
            Newsletter: "Newsletter",
            "Recevez les drops avant tout le monde": "Get drops before everyone",
            "Inscrivez-vous pour accéder aux préventes, codes promo exclusifs et invitations à nos évènements.": "Sign up for early access, exclusive promos and event invites.",
            "Votre email": "Your email",
            "S'inscrire": "Sign up",
            "Vision réinvente les essentiels urbains avec un regard responsable et avant-gardiste.": "Vision reinvents urban essentials with a responsible, forward-thinking approach.",
            "Ligne Métropolis": "Metropolis Line",
            "Essentials 24/7": "Essentials 24/7",
            "Fluid Dynamics": "Fluid Dynamics",
            "Drops exclusifs": "Exclusive drops",
            "Nous contacter": "Contact us",
            "Politique de retour": "Returns policy",
            "Livraison & suivi": "Shipping & tracking",
            "Confidentialité & cookies": "Privacy & cookies",
            "Mentions légales": "Legal notice",
            "Légal": "Legal",
            "Conditions générales de vente": "Terms of sale",
            "Préférences cookies": "Cookie preferences",
            "© Vision. Tous droits réservés.": "© Vision. All rights reserved.",
            "Budget : des toasts de chèvre ?": "Budget: goat cheese toasts?",
            "Vision utilise des cookies pour personnaliser votre expérience. Choisissez vos préférences.": "Vision uses cookies to tailor your experience. Choose your preferences.",
            "Paramétrer": "Manage",
            "Tout accepter": "Accept all",
            "Voir le panier": "View cart",
            "Composez votre uniforme urbain": "Build your urban uniform",
            "Filtrez par catégorie, taille, couleur ou disponibilité pour trouver la pièce Vision qui vous correspond.": "Filter by category, size, color or availability to find your Vision piece.",
            "Catégorie": "Category",
            "Taille": "Size",
            "Couleur": "Color",
            "Disponibilité": "Availability",
            "Toutes": "All",
            "Métropolis": "Metropolis",
            "Essentials": "Essentials",
            "Éditions limitées": "Limited editions",
            "Noir": "Black",
            "Blanc": "White",
            "Gris": "Grey",
            "Accent chromé": "Chrome accent",
            "En stock": "In stock",
            "Précommande": "Preorder",
            "Edition limitée": "Limited edition",
            "Appliquer": "Apply",
            "Réinitialiser": "Reset",
            "Utilisez le code VISION15": "Use code VISION15",
            "15% de réduction sur votre première commande. Offre limitée aux 500 premiers clients.": "15% off your first order. Offer limited to the first 500 customers.",
            "Besoin d'un conseil style ?": "Need a style consult?",
            "Réservez une session en visio avec nos stylistes Vision pour créer votre tenue idéale.": "Book a video session with our stylists to craft your look.",
            "Planifier une session": "Book a session",
            "Vision : l'esthétique streetwear pensée pour durer": "Vision: streetwear aesthetics built to last",
            "Notre univers": "Our universe",
            "Née dans les rues de Paris et façonnée par une communauté internationale, Vision repense les essentiels urbains avec exigence et conscience.": "Born in Paris streets and shaped by an international community, Vision rethinks urban essentials with care and conscience.",
            "2016 — Origines": "2016 — Origins",
            "Lancement de Vision avec une première série de hoodies produits en édition limitée et sérigraphiés à la main.": "Vision launches with a limited run of hand-screened hoodies.",
            "2018 — Communauté": "2018 — Community",
            "Ouverture du studio Vision à Paris, ateliers co-créatifs avec les clients et premières collaborations avec des artistes visuels.": "Vision studio opens in Paris, co-creation workshops with clients and first artist collabs.",
            "2021 — Expansion": "2021 — Expansion",
            "Distribution internationale, lancement de la plateforme e-commerce et introduction des gammes techniques.": "International distribution, e-commerce launch and technical lines debut.",
            "2024 — Innovation": "2024 — Innovation",
            "Intégration de la modélisation 3D, logistique bas carbone et programme de recyclage Vision Loop.": "3D modeling integration, low-carbon logistics and Vision Loop recycling program.",
            "Créer des pièces qui racontent les villes et respectent la planète": "Create pieces that tell city stories and respect the planet",
            "Chaque collection est conçue à partir de matériaux premium et responsables. Nous travaillons avec des ateliers certifiés, privilégions des séries limitées pour éviter la surproduction et offrons une traçabilité complète.": "Each collection uses premium, responsible materials. We partner with certified workshops, favor limited runs to avoid overproduction and provide full traceability.",
            "Mission": "Mission",
            "Vision": "Vision",
            "Une marque pensée pour la communauté": "A brand built for the community",
            "Vision défend la diversité, l'inclusivité et l'expression personnelle. Nos campagnes donnent la parole aux clients, artistes, athlètes et créatifs qui nous inspirent.": "Vision champions diversity, inclusivity and self-expression. Our campaigns spotlight customers, artists, athletes and creatives who inspire us.",
            "Nos piliers": "Our pillars",
            "Design fonctionnel": "Functional design",
            "Coupes étudiées, poches intelligentes, tissus respirants et résistance à l'eau pour accompagner les rythmes urbains.": "Refined cuts, smart pockets, breathable and water-resistant fabrics to match urban rhythms.",
            "Culture street": "Street culture",
            "Influencée par le skate, la musique électronique et l'art contemporain, Vision capte l'énergie des grandes villes.": "Shaped by skate, electronic music and contemporary art, Vision captures the energy of big cities.",
            "Responsabilité": "Responsibility",
            "Traçabilité complète, partenaires engagés, packaging recyclé et donation d'invendus à des associations.": "Full traceability, committed partners, recycled packaging and unsold donations to charities.",
            "L'équipe Vision": "The Vision team",
            "Une équipe multidisciplinaire mêlant designers, stylistes, développeurs, logisticiens et storytellers.": "A multidisciplinary crew of designers, stylists, developers, logisticians and storytellers.",
            "Directrice créative — imagine les silhouettes et collabore avec des artistes émergents.": "Creative Director — imagines silhouettes and collaborates with emerging artists.",
            "Head of Digital — pilote l'expérience e-commerce, la 3D et les innovations retail.": "Head of Digital — drives e-commerce, 3D and retail innovation.",
            "Responsable production — garantit la qualité, la traçabilité et la logistique bas carbone.": "Production lead — ensures quality, traceability and low-carbon logistics.",
            "Parlons de votre expérience Vision": "Let's talk about your Vision experience",
            "Support client, collaborations, presse ou wholesale — notre équipe est disponible en français et en anglais.": "Customer care, collabs, press or wholesale — we're here in French and English.",
            "Nom complet": "Full name",
            "Email": "Email",
            "Sujet": "Topic",
            "Message": "Message",
            "Support commande": "Order support",
            "Support client": "Customer support",
            "Collaboration": "Collaboration",
            "Presse": "Press",
            "Presse & collaborations": "Press & collaborations",
            "Wholesale": "Wholesale",
            "Envoyer": "Send",
            "Disponible du lundi au samedi, 9h-20h CET.": "Available Monday to Saturday, 9am-8pm CET.",
            "Envoyez vos dossiers de presse, portfolios et propositions de projets.": "Send your press kits, portfolios and project proposals.",
            "Visite sur rendez-vous, essayage privé et personnalisation.": "Visit by appointment, private fitting and customization.",
            "Showroom Vision": "Vision showroom",
            "Recyclage de vêtements, offres exclusives et invitations à nos évènements immersifs.": "Garment recycling, exclusive offers and invites to immersive events.",
            "Rejoignez la communauté Vision Loop": "Join the Vision Loop community",
            "S'inscrire": "Join",
            "Gérez votre profil Vision": "Manage your Vision profile",
            "Suivez vos commandes, gérez vos adresses, vos préférences de livraison et vos listes d'envies.": "Track orders, manage addresses, delivery preferences and wishlists.",
            "Connexion": "Sign in",
            "Créer un compte": "Create an account",
            "Suivi de commande": "Order tracking",
            "Mon espace": "My space",
            "Mot de passe": "Password",
            "Se connecter": "Sign in",
            "Mot de passe oublié ?": "Forgot password?",
            "Préférences": "Preferences",
            "Streetwear structuré": "Structured streetwear",
            "Casual minimal": "Casual minimal",
            "Drops exclusifs": "Exclusive drops",
            "Créer mon compte": "Create my account",
            "Je souhaite recevoir la newsletter Vision.": "I want to receive the Vision newsletter.",
            "Numéro de commande": "Order number",
            "Suivre": "Track",
            "Recevez des notifications en temps réel, ajustez vos créneaux de livraison et programmez un retour.": "Get real-time notifications, adjust delivery slots and schedule returns.",
            "Activez Vision+": "Activate Vision+",
            "Accès prioritaire aux drops, personnalisation des pièces et retours gratuits.": "Priority drops, product customization and free returns.",
            "Découvrir Vision+": "Discover Vision+",
            "Vos sélections Vision": "Your Vision picks",
            "Ajustez les quantités, appliquez vos codes promo et choisissez votre mode de livraison.": "Adjust quantities, apply promo codes and pick your delivery method.",
            "Récapitulatif": "Summary",
            "Sous-total": "Subtotal",
            "Livraison estimée": "Estimated shipping",
            "Total": "Total",
            "Code promo": "Promo code",
            "Passer au paiement sécurisé": "Proceed to secure payment",
            "Transactions sécurisées (CB, PayPal, Apple Pay). Garantie satisfait ou remboursé 30 jours.": "Secure checkout (card, PayPal, Apple Pay). 30-day satisfaction guarantee.",
            "Livraison agile": "Agile delivery",
            "Choisissez entre express, standard ou point relais. Suivi en temps réel sur votre espace Vision.": "Choose express, standard or pick-up point. Real-time tracking in your Vision space.",
            "Retours simplifiés": "Easy returns",
            "Préparez votre retour en ligne, choisissez la collecte à domicile ou déposez dans un point relais.": "Arrange returns online, schedule home pickup or drop at a hub.",
            "Support 24/7": "24/7 support",
            "Live chat, WhatsApp, email. Réponse sous 15 minutes pour les commandes en cours.": "Live chat, WhatsApp, email. Under 15-min response for active orders.",
            "Mentions légales & Conditions générales de vente": "Legal notice & Terms of sale",
            "Informations officielles de la marque Vision, détaillant notre statut juridique, les conditions de vente et les garanties associées.": "Official Vision information outlining legal status, sales terms and guarantees.",
            "Ce contenu est fourni à titre de maquette. Les informations officielles seront intégrées lorsque les documents juridiques seront finalisés.": "Content provided as a mockup. Official information will be added once documents are final.",
            "Vision Wear SAS — Capital social à définir — RCS Paris.": "Vision Wear Ltd — Share capital TBD — Paris Trade Register.",
            "Siège social : 18 rue Horizon, 75010 Paris, France.": "Head office: 18 rue Horizon, 75010 Paris, France.",
            "Contact : legal@visionwear.com — +33 (0)1 00 00 00 00.": "Contact: legal@visionwear.com — +33 (0)1 00 00 00 00.",
            "Directeur de publication : Aliyah Chen.": "Publishing director: Aliyah Chen.",
            "Hébergeur : à confirmer.": "Hosting provider: TBC.",
            "Ces CGV seront remplacées par le document officiel communiqué par l'équipe juridique.": "These terms will be replaced by the official legal document.",
            "Objet : définir les modalités de vente en ligne des produits Vision.": "Purpose: define online sales terms for Vision products.",
            "Produits : vêtements et accessoires streetwear, quantités limitées, disponibilité temps réel.": "Products: streetwear apparel & accessories, limited quantities, real-time stock.",
            "Prix : affichés en EUR avec TVA incluse. Conversion automatique selon la devise du pays de livraison.": "Prices: displayed in EUR incl. VAT. Automatic conversion to delivery currency.",
            "Commande : validation après email de confirmation. Possibilité de suivi via l'espace client.": "Orders: confirmed via email, with tracking from your account.",
            "Paiement : cartes bancaires, PayPal, wallets numériques. Sécurisation via protocole 3D Secure.": "Payment: cards, PayPal, digital wallets. 3D Secure protection.",
            "Livraison : internationale, délais indicatifs communiqués avant paiement, suivi en temps réel.": "Shipping: worldwide, estimated lead times shown before payment, real-time tracking.",
            "Retours : 30 jours, produits non portés. Remboursement sous 7 jours après validation.": "Returns: 30 days, unworn items. Refund within 7 days after validation.",
            "Garanties : conformité légale, défauts de fabrication, service après-vente dédié.": "Guarantees: legal compliance, manufacturing defects, dedicated support.",
            "Service client : support multilingue, contact@visionwear.com.": "Customer service: multilingual support, contact@visionwear.com.",
            "Droit applicable : droit français. Litiges soumis aux tribunaux compétents de Paris.": "Governing law: French law. Disputes handled by Paris courts.",
            "Confidentialité, retours, livraison & cookies": "Privacy, returns, shipping & cookies",
            "Retrouvez l'ensemble des informations clés concernant la gestion de vos données, les retours, la livraison et vos préférences de cookies.": "All the key information about data, returns, shipping and cookie preferences.",
            "Politique de confidentialité": "Privacy policy",
            "Vision s'engage à protéger vos données personnelles. Le document complet sera publié dès validation juridique.": "Vision protects your personal data. Full policy published after legal validation.",
            "Collecte limitée aux données nécessaires : identifiants, préférences, historique de commandes.": "Collection limited to essentials: identifiers, preferences, order history.",
            "Utilisation : gestion des commandes, personnalisation, newsletter Vision Loop.": "Use: order management, personalization, Vision Loop newsletter.",
            "Vos droits : accès, rectification, portabilité, suppression via privacy@visionwear.com.": "Your rights: access, rectification, portability, deletion via privacy@visionwear.com.",
            "Sécurité : chiffrement, audits réguliers, hébergement conforme RGPD.": "Security: encryption, regular audits, GDPR-compliant hosting.",
            "Politique de retour": "Returns policy",
            "Les modalités officielles seront intégrées lors de la mise en ligne. Aperçu des engagements Vision :": "Official terms will go live soon. Here's our commitment preview:",
            "Retour sous 30 jours, pièces non portées et étiquettes intactes.": "Return within 30 days, unworn items with tags.",
            "Portail Vision Loop pour générer une étiquette prépayée et suivre votre dossier.": "Vision Loop portal to generate prepaid labels and track cases.",
            "Remboursement sous 7 jours ouvrés après réception et contrôle qualité.": "Refund within 7 business days after inspection.",
            "Échanges possibles selon disponibilité en stock.": "Exchanges available subject to stock.",
            "Politique de livraison": "Shipping policy",
            "Vision expédie à l'international en collaborant avec des partenaires logistiques responsables.": "Vision ships worldwide with responsible logistics partners.",
            "Modes : express 24/48h, standard 3-5 jours, relais 4-6 jours.": "Options: express 24/48h, standard 3-5 days, pickup 4-6 days.",
            "Suivi temps réel via l'espace client et notifications SMS.": "Real-time tracking through your account and SMS alerts.",
            "Frais calculés selon le pays, offerts dès 200 € d'achat.": "Fees vary by country, free from €200.",
            "Option green : compensation carbone, emballages recyclés.": "Green option: carbon offset, recycled packaging.",
            "Politique cookies & préférences": "Cookie policy & preferences",
            "Vision respecte le RGPD. Cette section sera connectée à une CMP (Consent Management Platform) lors du développement final.": "Vision complies with GDPR. This section will connect to a CMP in the final build.",
            "Cookies essentiels : indispensables au fonctionnement (authentification, panier).": "Essential cookies: required for auth and cart.",
            "Cookies analytiques : mesure d'audience anonymisée.": "Analytics cookies: anonymized audience measurement.",
            "Cookies marketing : personnalisation des offres et campagnes.": "Marketing cookies: tailored offers and campaigns.",
            "Vous pouvez ajuster vos préférences à tout moment depuis le bandeau cookies ou votre compte.": "Adjust preferences anytime from the banner or your account."
        };
        return [key, dictionary[value] || value];
    })
);

const THEME_STORAGE_KEY = "vision-theme";

const getCurrentLanguage = () => (document.documentElement.lang === "fr" ? "fr" : "en");

const updateThemeToggleLabel = (lang = getCurrentLanguage()) => {
    const themeToggle = document.querySelector(".theme-toggle");
    if (!themeToggle) return;

    const currentTheme = document.documentElement.getAttribute("data-theme") === "light" ? "light" : "dark";
    const labelKey = currentTheme === "light" ? "theme_toggle_dark" : "theme_toggle_light";
    const label = (translations[lang] && translations[lang][labelKey]) || translations.fr[labelKey];
    const labelEl = themeToggle.querySelector(".theme-label");

    if (labelEl && label) {
        labelEl.textContent = label;
    }

    if (label) {
        themeToggle.setAttribute("aria-label", label);
    }

    themeToggle.dataset.state = currentTheme;
};

const applyTheme = (theme) => {
    const normalized = theme === "light" ? "light" : "dark";
    document.documentElement.setAttribute("data-theme", normalized);
    try {
        localStorage.setItem(THEME_STORAGE_KEY, normalized);
    } catch (error) {
        // ignore storage errors (private mode)
    }
    updateThemeToggleLabel();
};

const initThemeToggle = () => {
    const themeToggle = document.querySelector(".theme-toggle");
    if (!themeToggle) return;

    let initialTheme = document.documentElement.getAttribute("data-theme") === "light" ? "light" : "dark";

    try {
        const storedTheme = localStorage.getItem(THEME_STORAGE_KEY);
        if (storedTheme) {
            initialTheme = storedTheme;
        } else if (window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches) {
            initialTheme = "light";
        }
    } catch (error) {
        initialTheme = document.documentElement.getAttribute("data-theme") === "light" ? "light" : "dark";
    }

    applyTheme(initialTheme);

    themeToggle.addEventListener("click", () => {
        const currentTheme = document.documentElement.getAttribute("data-theme") === "light" ? "light" : "dark";
        const nextTheme = currentTheme === "light" ? "dark" : "light";
        applyTheme(nextTheme);
    });

    updateThemeToggleLabel();
};

const products = [
    {
        id: "metropolis-parka",
        name: { fr: "Parka Métropolis", en: "Metropolis Parka" },
        price: { fr: "420 €", en: "€420" },
        category: "metropolis",
        size: ["s", "m", "l"],
        color: "black",
        availability: "in-stock",
        tag: { fr: "Best-seller", en: "Best seller" }
    },
    {
        id: "essentials-hoodie",
        name: { fr: "Hoodie Essentials double épaisseur", en: "Double-layer Essentials Hoodie" },
        price: { fr: "190 €", en: "€190" },
        category: "essentials",
        size: ["xs", "s", "m", "l", "xl"],
        color: "grey",
        availability: "in-stock",
        tag: { fr: "Nouveau", en: "New" }
    },
    {
        id: "fluid-windbreaker",
        name: { fr: "Windbreaker Fluid Dynamics", en: "Fluid Dynamics Windbreaker" },
        price: { fr: "260 €", en: "€260" },
        category: "fluid",
        size: ["s", "m", "l"],
        color: "accent",
        availability: "preorder",
        tag: { fr: "Précommande", en: "Preorder" }
    },
    {
        id: "atelier-sneakers",
        name: { fr: "Sneakers Atelier 06", en: "Atelier 06 Sneakers" },
        price: { fr: "320 €", en: "€320" },
        category: "limited",
        size: ["s", "m", "l"],
        color: "white",
        availability: "restock",
        tag: { fr: "Edition limitée", en: "Limited" }
    }
];

const cart = [
    {
        id: "metropolis-parka",
        name: { fr: "Parka Métropolis", en: "Metropolis Parka" },
        price: 420,
        size: "M",
        color: "Black",
        quantity: 1
    },
    {
        id: "essentials-hoodie",
        name: { fr: "Hoodie Essentials double épaisseur", en: "Double-layer Essentials Hoodie" },
        price: 190,
        size: "L",
        color: "Charcoal",
        quantity: 2
    }
];

const formatCurrency = (value, lang) => {
    return new Intl.NumberFormat(lang === "fr" ? "fr-FR" : "en-US", {
        style: "currency",
        currency: "EUR"
    }).format(value);
};

const renderProducts = (lang) => {
    const productList = document.querySelector("#product-list");
    if (!productList) return;

    productList.innerHTML = "";

    const filters = new FormData(document.querySelector("#filters-form"));
    const selectedCategory = filters.get("category") || "all";
    const selectedSize = filters.get("size") || "all";
    const selectedColor = filters.get("color") || "all";
    const selectedAvailability = filters.get("availability") || "all";

    products
        .filter((product) => {
            const matchCategory = selectedCategory === "all" || product.category === selectedCategory;
            const matchSize = selectedSize === "all" || product.size.includes(selectedSize);
            const matchColor = selectedColor === "all" || product.color === selectedColor;
            const matchAvailability = selectedAvailability === "all" || product.availability === selectedAvailability;
            return matchCategory && matchSize && matchColor && matchAvailability;
        })
        .forEach((product) => {
            const card = document.createElement("article");
            card.className = "product-card";
            card.innerHTML = `
                <div class="product-image" aria-hidden="true">
                    <div class="image-placeholder">${product.name[lang].split(" ")[0]}</div>
                </div>
                <div class="product-meta">
                    <span>${product.tag[lang]}</span>
                    <span class="price">${product.price[lang]}</span>
                </div>
                <h3>${product.name[lang]}</h3>
                <p>${translations[lang].collections_copy}</p>
                <button class="btn ghost" type="button">${lang === "fr" ? "Ajouter au panier" : "Add to cart"}</button>
            `;
            productList.appendChild(card);
        });
};

const renderCart = (lang) => {
    const cartContainer = document.querySelector("#cart-items");
    const subtotalEl = document.querySelector("#cart-subtotal");
    const shippingEl = document.querySelector("#cart-shipping");
    const totalEl = document.querySelector("#cart-total");

    if (!cartContainer || !subtotalEl || !shippingEl || !totalEl) return;

    cartContainer.innerHTML = "";

    let subtotal = 0;

    cart.forEach((item) => {
        subtotal += item.price * item.quantity;
        const article = document.createElement("article");
        article.className = "cart-item";
        article.innerHTML = `
            <div class="image-placeholder">${item.name[lang].split(" ")[0]}</div>
            <div>
                <h3>${item.name[lang]}</h3>
                <p>${lang === "fr" ? "Taille" : "Size"}: ${item.size}</p>
                <p>${lang === "fr" ? "Couleur" : "Color"}: ${item.color}</p>
            </div>
            <div class="quantity-control" role="group" aria-label="${lang === "fr" ? "Quantité" : "Quantity"}">
                <button type="button" aria-label="${lang === "fr" ? "Réduire" : "Decrease"}">-</button>
                <span>${item.quantity}</span>
                <button type="button" aria-label="${lang === "fr" ? "Augmenter" : "Increase"}">+</button>
            </div>
        `;
        cartContainer.appendChild(article);
    });

    const shipping = subtotal > 200 ? 0 : 12;
    subtotalEl.textContent = formatCurrency(subtotal, lang);
    shippingEl.textContent = shipping === 0 ? (lang === "fr" ? "Offert" : "Free") : formatCurrency(shipping, lang);
    totalEl.textContent = formatCurrency(subtotal + shipping, lang);
};

const updateTranslations = (lang) => {
    document.documentElement.lang = lang === "fr" ? "fr" : "en";
    document.querySelectorAll("[data-i18n]").forEach((el) => {
        const key = el.getAttribute("data-i18n");
        if (translations[lang][key]) {
            el.textContent = translations[lang][key];
        }
    });

    const ctaButtons = document.querySelectorAll(".hero-actions .btn, .hero-card .text-link, .btn.ghost, .btn");
    ctaButtons.forEach((button) => {
        button.setAttribute("aria-label", button.textContent);
    });

    updateThemeToggleLabel(lang);

    renderProducts(lang);
    renderCart(lang);
};

const initLangToggle = () => {
    const toggle = document.querySelector(".lang-toggle");
    if (!toggle) return;

    let currentLang = toggle.dataset.lang || "fr";

    toggle.addEventListener("click", () => {
        currentLang = currentLang === "fr" ? "en" : "fr";
        toggle.dataset.lang = currentLang;
        toggle.textContent = currentLang.toUpperCase();
        updateTranslations(currentLang);
    });

    updateTranslations(currentLang);
};

const initNavToggle = () => {
    const navToggle = document.querySelector(".nav-toggle");
    const navList = document.querySelector(".nav-list");
    if (!navToggle || !navList) return;

    navToggle.addEventListener("click", () => {
        const expanded = navToggle.getAttribute("aria-expanded") === "true";
        navToggle.setAttribute("aria-expanded", String(!expanded));
        navList.classList.toggle("open");
    });
};

const initNewsletter = () => {
    const form = document.querySelector(".newsletter-form");
    if (!form) return;
    const feedback = form.querySelector(".form-feedback");

    form.addEventListener("submit", (event) => {
        event.preventDefault();
        const email = form.email.value.trim();
        if (!email) {
            feedback.textContent = document.documentElement.lang === "fr" ? "Veuillez renseigner un email." : "Please add your email.";
            return;
        }
        feedback.textContent = document.documentElement.lang === "fr" ? "Merci, votre inscription est confirmée !" : "Thanks, you're on the list!";
        form.reset();
    });
};

const initForms = () => {
    const forms = document.querySelectorAll("form");
    forms.forEach((form) => {
        const feedback = form.querySelector(".form-feedback");
        form.addEventListener("submit", (event) => {
            event.preventDefault();
            if (feedback) {
                feedback.textContent = document.documentElement.lang === "fr" ? "Prototype : action simulée." : "Prototype: action simulated.";
            }
        });
    });
};

const initFilters = () => {
    const filtersForm = document.querySelector("#filters-form");
    if (!filtersForm) return;

    filtersForm.addEventListener("submit", (event) => {
        event.preventDefault();
        renderProducts(document.documentElement.lang === "fr" ? "fr" : "en");
    });

    filtersForm.addEventListener("reset", () => {
        setTimeout(() => renderProducts(document.documentElement.lang === "fr" ? "fr" : "en"), 0);
    });

    renderProducts("fr");
};

const initCookiesBanner = () => {
    const banner = document.querySelector(".cookies-banner");
    if (!banner) return;
    const accept = banner.querySelector('[data-action="cookies-accept"]');
    const settings = banner.querySelector('[data-action="cookies-settings"]');

    const showBanner = () => banner.classList.add("visible");
    const hideBanner = () => banner.classList.remove("visible");

    setTimeout(showBanner, 1500);

    accept?.addEventListener("click", hideBanner);
    settings?.addEventListener("click", () => {
        alert(document.documentElement.lang === "fr" ? "Interface de préférences à intégrer." : "Preferences interface coming soon.");
    });
};

const init = () => {
    initThemeToggle();
    initLangToggle();
    initNavToggle();
    initNewsletter();
    initForms();
    initFilters();
    renderCart("fr");
    initCookiesBanner();
};

document.addEventListener("DOMContentLoaded", init);
